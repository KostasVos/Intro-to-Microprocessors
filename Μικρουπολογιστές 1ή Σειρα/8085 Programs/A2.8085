START:

IN 10H
LXI B,01F4H	;B <- F4H, C<-01H, συνολικα το 500 σε δεκαδικο
			;Χρληση στην κλήση DELB ώστε να έχουμε 1/2 sec
			
MVI D,01H   ;D δείχνει ποιό led ανάβει, αρχικά θέτω το 1ο

L1:

LDA 2000H  	;Α<- εισοδος από διακόπτες
MOV E,A		;Προσωρινά σώζω τον Α
RAR			;Ολισθηση δεξιά και CY <- LSB
JC L1		;Loop εως LSB=0, αλλιως (LSB==1), δεν πραγματοποιειται κινηση
MOV A,E

CALL DELB   ;Καθυστέρηση συμφωνα με BC, 1/2 sec
RAL			;CY <- MSB και περιστρο
JC LEFT		;Aν MSB==1 αριστερή κίνηση, αλλιώς συνεχίζουμε δεξια

MOV A,D		;Καταχωρειται στον Α ο αριθμός του led που θα ανάψει
CMA			;Συμπλήρωμα λόγω αντίστροφης λογικής LED
STA 3000H	;Εμφάνιση του led που δείχνει ο Α
CMA			;Επαναφορά του Α
RRC			;Shift ΔΕΞΙΆ για να ανάψει το επομενο led
MOV D,A
JMP L1	;Επιστροφη και ελεγχος αν αλλαξε το ΜSB

LEFT:
MOV A,D		
CMA			
STA 3000H	
CMA			
RLC			;Αριστερή ολίσθηλη τώρα
MOV D,A
JMP L1	;Επιστροφη και ελεγχος αν αλλαξε το ΜSB

END
